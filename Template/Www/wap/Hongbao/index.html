<include file="Public:header" />
<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript">
    onload = function() {
        if (!document.all)
        {
            document.forms['theForm'].reset();
        }
    }

</script>
<form action="{:U('/hongbao/add')}" method="post" name="theForm" id="theForm" onSubmit="return checkHongBao(this)">
    <input type="hidden" name="sign" value="{$sign}" />
    <div class="mod_container">
        <div class="wx_bar">
            <div class="wx_bar_back"> <a id="back" href="javascript:void(0);"></a> </div>
            <div class="wx_bar_tit" style="text-align: center; font-size: 14px; line-height: 36px"><b>新建红包</b></div>
        </div>
        <div class="wx_wrap">
            <div class="address_new">
                <input id="address_regionId" value="" type="hidden">
                <input id="adid" value="" type="hidden">
                <p>
                    <label for="amount"><span class="tit">每份金额：</span>
                        <input name="amount" type="number" class="inputBg" id="amount" maxlength="4" value="1" placeholder="每份金额"/> <span class="">元</span>
                        <span id="updateTip1" style="color: red; display: none;">请填写每份金额</span> </label>
                </p>
                <p>
                    <label for="total"><span class="tit">总份数：</span>
                        <input name="total" type="number" class="inputBg"  id="total" maxlength="3" value="10" placeholder="总份数"/> <span class="">份</span>
                        <span id="updateTip2" style="color: red; display: none;">请填写总份数</span> </label>
                </p>

                <p>
                    <label for="remark"><span class="tit">说明：</span>
                        <input name="remark" type="text" class="inputBg"  id="remark" value="凑红包，有福利，你懂得" placeholder="凑红包，有福利，你懂得" />
                        <span id="updateTip3" style="color: red; display: none;">红包说明</span> </label>
                </p>
                <p class="action">
                    <button class="submit" id="add">凑 红 包</button>
                </p>
            </div>
            <div class="state_btn"> <a class='state_btn_4' href="javascript:void(0)" onclick="remark()">凑红包玩法?</a> </div>
        </div>
    </div>
</form>
<include file="Public:foot" />
<script type="text/javascript">

    function checkHongBao(){
        var amount = $('input[name="amount"]').val();
        var reg = new RegExp("^[0-9]\.?[0-9]*$");
        if(!reg.test(amount)){
            layer.msg('请填写整数金额.', function(){});
            return false;
        }

        if(amount > 200 || amount < 0){
            layer.msg('请输入1-200之间金额.', function(){});
            return false;
        }

        // $('#updateTip1').hide();


        var total = $('input[name="total"]').val();
        if(!reg.test(total)){
            layer.msg('请填写整数份额.', function(){});
            return false;
        }

        if(total > 200 || total < 1){
            layer.msg('请输入1-200之间份额.', function(){});
            return false;
        }

        if(amount * total > 200){
            layer.msg('总金额不能超过200元.', function(){});
            return false;
        }
        return true;
    }

    function remark(){
        layer.open({
            title: '凑红包玩法?'
            ,content: (" <span style='text-align: left'> 1. 发起凑红包 <br />"+
                    "2. 邀请朋友参与 <br/>"+
                    "3. 红包凑满后，款项会立即转给发起人（扣除2%微信支付手续费）<br/>"+
                    "4. 系统会根据参与份数，随机抽出幸运星</span>")
            ,btn: ['知道了']
        });
    }
</script>
</body>
</html>
