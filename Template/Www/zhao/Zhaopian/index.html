<include file="Public:header" xmlns="http://www.w3.org/1999/html"/>
<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript">
    onload = function() {
        if (!document.all)
        {
            document.forms['theForm'].reset();
        }
    }

</script>
<div class="container">
	<div class="from">
        <form action="{:U('/hongbao/add')}" method="post" name="theForm" id="theForm" onSubmit="return checkHongBao(this)">
            <input type="hidden" name="sign" value="{$sign}" />
		<ul>
			<div class="row" style="height: 200px; background: url(/images/bg.png) center center no-repeat #161616;">

		     </div>
		</ul>
		<ul>
			<div class="row">
				<input class="fr color_999 tl text"  name="remark" maxlength="120"  id="remark" value="珍藏多年,首次公开,绝对值得" />
			</div>
		</ul>
		<ul>
			<div class="w50 fl">
				<div class="amount tr"><input type="button" class="btn w50 " value="随机价格" /></div>
				<div class="amount_remark tr ptop6 pbottom10" style="padding-right: 12px;">￥1.05-￥5.00范围随机</div>
			</div>
            <div class="w50 fl">
                <div class="amount tl ml10"><input type="button" class="btn w50 color_def" value="设置价格" /></div>
                <div class="amount_remark ml10 ptop6 pbottom10" style="padding-left: 12px;">可设置￥2-￥200内</div>
            </div>
		</ul>
		<ul class="cl mt10">
		<div class="tit ">
			<div class="w90 mc">
			<input type="submit" class="btn" value="凑 红 包" />
			</div>
			<div class="w90 mc tc f12 ptop6">
                发布一张朋友发红包才能看的照片
                收入会自动通过微信红包发给你
			</div>
			</div>
		</ul>
		</form>
	</div>

</div>

<div id="remark_block" style="display: none">
    <div id="shareit">
    </div>
     <span style="text-align: center; background: #fff; padding: 12px; -webkit-border-radius:5px;border-radius:5px; line-height: 18px; border: 1px solid #000; width: 90%; left: 5%;" id="follow">
        <p style="text-align: left">
            1. 发起凑红包 <br />
            2. 邀请朋友参与 <br/>
            3. 红包凑满后，款项会立即转给发起人（扣除2%微信支付手续费）<br/>
            4. 系统会根据参与份数，随机抽出幸运星</p>

        <input type="button" class="btn mc" onclick="$('#remark_block').hide();" style="width: 80%; height: 36px; margin-top: 12px; line-height: 36px;" value="知 道 了" />
       </span>
</div>
<include file="Public:foot" />
<script type="text/javascript">

    $('input[name="amount"]').keyup(function(){
        var amount = parseFloat($(this).val() == ''?0:$(this).val());
        var total = parseInt($('input[name="total"]').val() == ''?0:$('input[name="total"]').val());
        $('.total_amount').text(amount * total);

    });
    $('input[name="total"]').keyup(function(){
        var amount = parseFloat($('input[name="amount"]').val() == ''?0:$('input[name="amount"]').val());
        var total = parseInt($('input[name="total"]').val() == ''?0:$('input[name="total"]').val());

        $('.total_amount').text(amount * total);
    });
    function show_remark(){
//        layer.open({
//            title: '凑红包玩法?'
//            ,content: (" <span style='text-align: left'> 1. 发起凑红包 <br />"+
//                    "2. 邀请朋友参与 <br/>"+
//                    "3. 红包凑满后，款项会立即转给发起人（扣除2%微信支付手续费）<br/>"+
//                    "4. 系统会根据参与份数，随机抽出幸运星</span>")
//            ,btn: ['知道了']
//        });
        $('#remark_block').show();
    }

    function checkTextLength(obj, length) {
        if(obj.value.length > length)   {
            obj.value = obj.value.substr(0, length);
        }
    }

    function checkHongBao(){
        var amount = $('input[name="amount"]').val();
        var reg = new RegExp("^[0-9]\.?[0-9]*$");
        if(!reg.test(amount)){
            layer.msg('请填写整数金额.', function(){});
            return false;
        }

        if(amount > 200 || amount < 0){
            layer.msg('请输入200之内金额.', function(){});
            return false;
        }

        // $('#updateTip1').hide();


        var total = $('input[name="total"]').val();
        if(!reg.test(total)){
            layer.msg('请填写整数份额.', function(){});
            return false;
        }

        if(total > 200 || total < 1){
            layer.msg('请输入1-200之间份额.', function(){});
            return false;
        }

        if(amount * total > 200 || amount * total < 2){
            layer.msg('总金额在2-200元之间.', function(){});
            return false;
        }
        return true;
    }


</script>
</body>
</html>
