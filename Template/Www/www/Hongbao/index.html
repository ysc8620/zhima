<include file="Public:header" />
<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript">
    onload = function() {
        if (!document.all)
        {
            document.forms['theForm'].reset();
        }
    }

</script>
<div class="container">
	<div class="from">
        <form action="{:U('/hongbao/add')}" method="post" name="theForm" id="theForm" onSubmit="return checkHongBao(this)">
            <input type="hidden" name="sign" value="{$sign}" />
		<ul>
			<div class="row">
				<span class="label">每份金额</span><input class="fr"  name="amount" type="number" id="amount" oninput="checkTextLength( this,4)" maxlength="4" value="1" /><span class="unit">元</span>
			</div>
		</ul>
		<ul>
			<div class="row">
				<span class="label">红包份数</span><input class="fr" name="total" type="number" id="total" oninput="checkTextLength( this,3)" maxlength="3" value="10" /><span class="unit">份</span>
			<div>
		</ul>
		<ul>
			<div class="row">
				<span class="label">说明</span><input class="fr color_999 tr"  name="remark" maxlength="120" id="remark" value="凑红包,有福利,你懂得" />
			</div>
		</ul>
		<ul>
			<div class="tit">
				<div class="amount">￥<font class="total_amount">10.00</font></div>
				<div class="amount_remark">总金额最大不能超过200元</div>
			</div>
		</ul>
		<ul> 
		<div class="tit">
			<div class="w90 mc">
			<input type="submit" class="btn" value="凑红包" />
			</div>
			<div class="w90 mc tr">
			<a href="javascript:void(0)" onclick="show_remark()">凑红包玩法？</a>
			</div>
			</div>
		</ul>
		</form>
	</div>
	
	<div class="from"><div class="foot_reamrk">如果24小时内该红包没有凑齐, 系统会自动退款</div></div>
</div>

<div id="remark_block" style="display: block">
    <div id="shareit">
    </div>
    <span style="text-align: left; background: #fff; padding: 12px; line-height: 18px; border: 1px solid #000; width: 80%; left: 10%;" id="follow">
        <p>
            1. 发起凑红包 <br />
            2. 邀请朋友参与 <br/>
            3. 红包凑满后，款项会立即转给发起人（扣除2%微信支付手续费）<br/>
            4. 系统会根据参与份数，随机抽出幸运星</p>

        <input type="button" class="btn fr" onclick="$('#remark_block').hide();" style="width: 120px;" value="知道了" />
       </span>
</div>
<include file="Public:foot" />
<script type="text/javascript">
    function show_remark(){
//        layer.open({
//            title: '凑红包玩法?'
//            ,content: (" <span style='text-align: left'> 1. 发起凑红包 <br />"+
//                    "2. 邀请朋友参与 <br/>"+
//                    "3. 红包凑满后，款项会立即转给发起人（扣除2%微信支付手续费）<br/>"+
//                    "4. 系统会根据参与份数，随机抽出幸运星</span>")
//            ,btn: ['知道了']
//        });
        $('.remark_block').show();
    }

    function checkTextLength(obj, length) {
        if(obj.value.length > length)   {
            obj.value = obj.value.substr(0, length);
        }
    }

    function checkHongBao(){
        var amount = $('input[name="amount"]').val();
        var reg = new RegExp("^[0-9]\.?[0-9]*$");
        if(!reg.test(amount)){
            layer.msg('请填写整数金额.', function(){});
            return false;
        }

        if(amount > 200 || amount < 0){
            layer.msg('请输入1-200之间金额.', function(){});
            return false;
        }

        // $('#updateTip1').hide();


        var total = $('input[name="total"]').val();
        if(!reg.test(total)){
            layer.msg('请填写整数份额.', function(){});
            return false;
        }

        if(total > 200 || total < 1){
            layer.msg('请输入1-200之间份额.', function(){});
            return false;
        }

        if(amount * total > 200){
            layer.msg('总金额不能超过200元.', function(){});
            return false;
        }
        return true;
    }


</script>
</body>
</html>
